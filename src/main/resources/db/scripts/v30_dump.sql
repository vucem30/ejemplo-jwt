--
-- PostgreSQL database dump
--

-- Dumped from database version 17.2 (Debian 17.2-1.pgdg120+1)
-- Dumped by pg_dump version 17.2 (Debian 17.2-1.pgdg120+1)

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: meta_cat_att; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.meta_cat_att (
    id integer NOT NULL,
    nombre character varying(64) NOT NULL,
    id_meta_cat_tipo_dato integer NOT NULL
);


ALTER TABLE public.meta_cat_att OWNER TO postgres;

--
-- Name: meta_cat_att_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.meta_cat_att ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.meta_cat_att_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: meta_cat_tipo_dato; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.meta_cat_tipo_dato (
    id integer NOT NULL,
    nombre character varying(64) NOT NULL
);


ALTER TABLE public.meta_cat_tipo_dato OWNER TO postgres;

--
-- Name: meta_cat_tipo_dato_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.meta_cat_tipo_dato ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.meta_cat_tipo_dato_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: meta_cat_val; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.meta_cat_val (
    id integer NOT NULL,
    id_meta_cat_att integer NOT NULL,
    valor character varying(64) NOT NULL
);


ALTER TABLE public.meta_cat_val OWNER TO postgres;

--
-- Name: meta_cat_val_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.meta_cat_val ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.meta_cat_val_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: solicitud_detalle; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.solicitud_detalle (
    id_solicitud integer NOT NULL,
    id_meta_cat_att integer NOT NULL,
    valor text NOT NULL
);


ALTER TABLE public.solicitud_detalle OWNER TO postgres;

--
-- Name: usuario; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.usuario (
    id integer NOT NULL,
    correo character varying(255) NOT NULL,
    clave character varying(255) NOT NULL,
    creado bigint NOT NULL,
    activo boolean NOT NULL,
    acceso_negado_contador integer NOT NULL,
    instante_bloqueo bigint NOT NULL,
    instante_ultimo_acceso bigint NOT NULL,
    instante_ultimo_cambio_clave bigint NOT NULL,
    regenera_clave_token character varying(255),
    regenera_clave_instante bigint NOT NULL,
    nick character varying(255) NOT NULL,
    rol character varying(255) NOT NULL,
    uuid character varying(255) NOT NULL
);


ALTER TABLE public.usuario OWNER TO postgres;

--
-- Name: usuario_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.usuario_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.usuario_id_seq OWNER TO postgres;

--
-- Name: usuario_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.usuario_id_seq OWNED BY public.usuario.id;


--
-- Name: vw_solicitud_detalle; Type: VIEW; Schema: public; Owner: postgres
--

CREATE VIEW public.vw_solicitud_detalle AS
 SELECT solicitud_detalle.id_solicitud,
    solicitud_detalle.id_meta_cat_att AS id_atributo,
    meta_cat_att.nombre AS nombre_atributo,
    solicitud_detalle.valor AS valor_atributo,
    meta_cat_tipo_dato.nombre AS tipo_dato,
    meta_cat_tipo_dato.id AS id_tipo_dato
   FROM public.solicitud_detalle,
    public.meta_cat_att,
    public.meta_cat_tipo_dato
  WHERE ((meta_cat_att.id = solicitud_detalle.id_meta_cat_att) AND (meta_cat_tipo_dato.id = meta_cat_att.id_meta_cat_tipo_dato));


ALTER VIEW public.vw_solicitud_detalle OWNER TO postgres;

--
-- Name: usuario id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.usuario ALTER COLUMN id SET DEFAULT nextval('public.usuario_id_seq'::regclass);


--
-- Data for Name: meta_cat_att; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.meta_cat_att (id, nombre, id_meta_cat_tipo_dato) FROM stdin;
1	Ojos	1
2	Piel	1
3	Pelo	1
4	Estudios	1
5	Color	1
6	Estatura	2
7	Peso	3
8	Extranjero	4
9	Aprobado	4
10	Precio	3
11	Nacimiento	5
12	Slogan	6
13	FraseFavorita	6
14	sitioWeb	7
15	fotoPrincipal	7
16	fotoFondo	7
17	coloresPreferidos	8
\.


--
-- Data for Name: meta_cat_tipo_dato; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.meta_cat_tipo_dato (id, nombre) FROM stdin;
1	catalogo
2	entero
3	decimal
4	boleano
5	enteroLargo
6	cadena
7	url
8	multiCatalogo
\.


--
-- Data for Name: meta_cat_val; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.meta_cat_val (id, id_meta_cat_att, valor) FROM stdin;
1	1	negros
2	1	azules
3	1	verdes
4	1	café
5	2	morena
6	2	negra
7	2	blanca
8	3	negro
9	3	rubio
10	3	rojo
11	3	blanco
12	3	pelón
13	5	amarillo
14	5	naranja
15	5	violeta
16	5	gris
\.


--
-- Data for Name: solicitud_detalle; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.solicitud_detalle (id_solicitud, id_meta_cat_att, valor) FROM stdin;
1756	17	24_137_5_971_7155
1756	6	176
1756	7	78.752
1756	12	Just do it
\.


--
-- Data for Name: usuario; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.usuario (id, correo, clave, creado, activo, acceso_negado_contador, instante_bloqueo, instante_ultimo_acceso, instante_ultimo_cambio_clave, regenera_clave_token, regenera_clave_instante, nick, rol, uuid) FROM stdin;
1	user1@example.com	clave1	1698179200	t	0	0	1698179200	1698179200	\N	1698179200	nick1	admin	uuid1
2	user2@example.com	clave2	1698179300	t	0	0	1698179300	1698179300	\N	1698179300	nick2	user	uuid2
3	user3@example.com	clave3	1698179400	t	1	0	1698179400	1698179400	\N	1698179400	nick3	admin	uuid3
4	user4@example.com	clave4	1698179500	t	2	0	1698179500	1698179500	\N	1698179500	nick4	user	uuid4
5	user5@example.com	clave5	1698179600	f	3	1698179700	1698179600	1698179600	token5	1698179700	nick5	admin	uuid5
6	user6@example.com	clave6	1698179700	t	0	0	1698179700	1698179700	\N	1698179700	nick6	user	uuid6
7	user7@example.com	clave7	1698179800	t	1	0	1698179800	1698179800	\N	1698179800	nick7	admin	uuid7
8	user8@example.com	clave8	1698179900	f	2	1698180000	1698179900	1698179900	token8	1698180000	nick8	user	uuid8
9	user9@example.com	clave9	1698180000	t	0	0	1698180000	1698180000	\N	1698180000	nick9	admin	uuid9
10	user10@example.com	clave10	1698180100	t	0	0	1698180100	1698180100	\N	1698180100	nick10	user	uuid10
11	user100@example.com	clave100	1698269200	t	0	0	1698269200	1698269200	\N	1698269200	nick100	user	uuid100
\.


--
-- Name: meta_cat_att_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.meta_cat_att_id_seq', 1, false);


--
-- Name: meta_cat_tipo_dato_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.meta_cat_tipo_dato_id_seq', 1, true);


--
-- Name: meta_cat_val_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.meta_cat_val_id_seq', 1, false);


--
-- Name: usuario_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.usuario_id_seq', 11, true);


--
-- Name: meta_cat_att meta_cat_att_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.meta_cat_att
    ADD CONSTRAINT meta_cat_att_pkey PRIMARY KEY (id);


--
-- Name: meta_cat_tipo_dato meta_cat_tipo_dato_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.meta_cat_tipo_dato
    ADD CONSTRAINT meta_cat_tipo_dato_pkey PRIMARY KEY (id);


--
-- Name: meta_cat_val meta_cat_val_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.meta_cat_val
    ADD CONSTRAINT meta_cat_val_pkey PRIMARY KEY (id);


--
-- Name: solicitud_detalle solicitud_detail_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.solicitud_detalle
    ADD CONSTRAINT solicitud_detail_pkey PRIMARY KEY (id_solicitud, id_meta_cat_att);


--
-- Name: usuario usuario_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.usuario
    ADD CONSTRAINT usuario_pkey PRIMARY KEY (id);


--
-- Name: meta_cat_val fk_meta_cat_att; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.meta_cat_val
    ADD CONSTRAINT fk_meta_cat_att FOREIGN KEY (id_meta_cat_att) REFERENCES public.meta_cat_att(id);


--
-- Name: meta_cat_att fk_meta_cat_tipo_dato; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.meta_cat_att
    ADD CONSTRAINT fk_meta_cat_tipo_dato FOREIGN KEY (id_meta_cat_tipo_dato) REFERENCES public.meta_cat_tipo_dato(id);


--
-- Name: solicitud_detalle fk_solicitud_meta_cat_att; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.solicitud_detalle
    ADD CONSTRAINT fk_solicitud_meta_cat_att FOREIGN KEY (id_meta_cat_att) REFERENCES public.meta_cat_att(id);


--
-- PostgreSQL database dump complete
--

